{"componentChunkName":"component---src-templates-blog-post-js","path":"/django/drf-swagger/","result":{"data":{"site":{"siteMetadata":{"title":"Blog"}},"markdownRemark":{"id":"ffca739a-f60e-5936-a9ac-b5740a1d5a67","excerpt":"를 이용했습니다 🙃 Contents  모듈로 분리 에 custom header 추가하기 🔷 schemas 모듈로 분리  파일에  내용이 많아서 코드 가독성이 안 좋다.   모듈로 swagger…","html":"<blockquote>\n<p><code class=\"language-text\">drf-spectacular</code>를 이용했습니다 🙃</p>\n</blockquote>\n<h1>Contents</h1>\n<ul>\n<li><code class=\"language-text\">schemas</code> 모듈로 분리</li>\n<li><code class=\"language-text\">response</code>에 custom header 추가하기</li>\n</ul>\n<h1>🔷 schemas 모듈로 분리</h1>\n<p><code class=\"language-text\">views.py</code> 파일에 <code class=\"language-text\">swagger</code> 내용이 많아서 코드 가독성이 안 좋다. <br>\n<code class=\"language-text\">schemas.py</code> 모듈로 swagger에 들어갈 내용은 옮기는 게 좋은 거 같다 🙃</p>\n<h3>모듈 분리 전</h3>\n<p><code class=\"language-text\">views.py</code> : 공연 목록 조회</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> drf_spectacular<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> OpenApiExample<span class=\"token punctuation\">,</span> OpenApiParameter<span class=\"token punctuation\">,</span> extend_schema_view\n<span class=\"token keyword\">from</span> drf_spectacular<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> extend_schema\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PerformanceViewSet</span><span class=\"token punctuation\">(</span>mixins<span class=\"token punctuation\">.</span>ListModelMixin<span class=\"token punctuation\">,</span>\n                         mixins<span class=\"token punctuation\">.</span>RetrieveModelMixin<span class=\"token punctuation\">,</span>\n                         viewsets<span class=\"token punctuation\">.</span>GenericViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"공연 리스트 및 상세 조회 API\"\"\"</span>\n    serializer_class <span class=\"token operator\">=</span> PerformanceSerializer\n    pagination_class <span class=\"token operator\">=</span> StandardResultsSetPagination\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        queryset <span class=\"token operator\">=</span> Performance<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'genre'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prefetch_related<span class=\"token punctuation\">(</span><span class=\"token string\">'liked_users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        genre_id <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query_params<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'genre_id'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n        status <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query_params<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> genre_id<span class=\"token punctuation\">:</span>\n            queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>genre__id<span class=\"token operator\">=</span>genre_id<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> status<span class=\"token punctuation\">:</span>\n            queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> queryset\n\n    <span class=\"token decorator annotation punctuation\">@extend_schema</span><span class=\"token punctuation\">(</span>\n        tags<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'공연'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        summary<span class=\"token operator\">=</span><span class=\"token string\">\"공연 목록 조회\"</span><span class=\"token punctuation\">,</span>\n        parameters<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n            OpenApiParameter<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"genre_id\"</span><span class=\"token punctuation\">,</span> description<span class=\"token operator\">=</span><span class=\"token string\">\"공연 장르 id\"</span><span class=\"token punctuation\">,</span> required<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            OpenApiParameter<span class=\"token punctuation\">(</span>\n                name<span class=\"token operator\">=</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span>\n                enum<span class=\"token operator\">=</span>PerformanceStatus<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                description<span class=\"token operator\">=</span><span class=\"token string\">\"공연 상태\"</span><span class=\"token punctuation\">,</span>\n                examples<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n                    OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 예정\"</span><span class=\"token punctuation\">,</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"upcoming\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 중\"</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">=</span><span class=\"token string\">\"ongoing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 종료\"</span><span class=\"token punctuation\">,</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"ended\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">list</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>모듈 분리 후</h3>\n<ol>\n<li><code class=\"language-text\">schemas.py</code> 모듈 추가</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> drf_spectacular<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> OpenApiExample<span class=\"token punctuation\">,</span> OpenApiParameter<span class=\"token punctuation\">,</span> extend_schema_view\n<span class=\"token keyword\">from</span> drf_spectacular<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> extend_schema\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> PerformanceStatus\n\nPERFORMANCE_LIST_SCHEMA <span class=\"token operator\">=</span> extend_schema<span class=\"token punctuation\">(</span>\n        tags<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'공연'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        summary<span class=\"token operator\">=</span><span class=\"token string\">\"공연 목록 조회\"</span><span class=\"token punctuation\">,</span>\n        parameters<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n            OpenApiParameter<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"genre_id\"</span><span class=\"token punctuation\">,</span> description<span class=\"token operator\">=</span><span class=\"token string\">\"공연 장르 id\"</span><span class=\"token punctuation\">,</span> required<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            OpenApiParameter<span class=\"token punctuation\">(</span>\n                name<span class=\"token operator\">=</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span>\n                enum<span class=\"token operator\">=</span>PerformanceStatus<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                description<span class=\"token operator\">=</span><span class=\"token string\">\"공연 상태\"</span><span class=\"token punctuation\">,</span>\n                examples<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n                    OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 예정\"</span><span class=\"token punctuation\">,</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"upcoming\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 중\"</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">=</span><span class=\"token string\">\"ongoing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 종료\"</span><span class=\"token punctuation\">,</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"ended\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"2\">\n<li><code class=\"language-text\">views.py</code> : <code class=\"language-text\">schemas.py</code>에서 <code class=\"language-text\">PERFORMANCE_LIST_SCHEMA</code>의 내용 데코레이터로 사용</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>schemas <span class=\"token keyword\">import</span> PERFORMANCE_LIST_SCHEMA\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PerformanceViewSet</span><span class=\"token punctuation\">(</span>mixins<span class=\"token punctuation\">.</span>ListModelMixin<span class=\"token punctuation\">,</span>\n                         mixins<span class=\"token punctuation\">.</span>RetrieveModelMixin<span class=\"token punctuation\">,</span>\n                         viewsets<span class=\"token punctuation\">.</span>GenericViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"공연 리스트 및 상세 조회 API\"\"\"</span>\n    serializer_class <span class=\"token operator\">=</span> PerformanceSerializer\n    pagination_class <span class=\"token operator\">=</span> StandardResultsSetPagination\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        queryset <span class=\"token operator\">=</span> Performance<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'genre'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>prefetch_related<span class=\"token punctuation\">(</span><span class=\"token string\">'liked_users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        genre_id <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query_params<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'genre_id'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n        status <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query_params<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> genre_id<span class=\"token punctuation\">:</span>\n            queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>genre__id<span class=\"token operator\">=</span>genre_id<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> status<span class=\"token punctuation\">:</span>\n            queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> queryset\n\n    <span class=\"token decorator annotation punctuation\">@PERFORMANCE_LIST_SCHEMA</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">list</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>args<span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<h1>response에 custom header 추가</h1>\n<p><code class=\"language-text\">count</code>, <code class=\"language-text\">next</code> , <code class=\"language-text\">previous</code> 와 같이 페이지네이션과 관련된 내용은 <code class=\"language-text\">response</code> header로 전달하도록 구현했으나, swagger에서는 자동으로 body 값으로 보내고 있다</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">BasePaginationResponseMixin</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"공통 페이지네이션 응답 처리를 위한 Mixin\"\"\"</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_paginated_response</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        response <span class=\"token operator\">=</span> Response<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>get_next_link<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">'Next-Page'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_next_link<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>get_previous_link<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">'Previous-Page'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>get_previous_link<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># 전체 데이터 개수 추가 (PageNumberPagination만 적용)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> <span class=\"token string\">'page'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> <span class=\"token builtin\">hasattr</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">,</span> <span class=\"token string\">'paginator'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">'Total-Count'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">.</span>paginator<span class=\"token punctuation\">.</span>count\n\n        <span class=\"token keyword\">return</span> response\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">StandardResultsSetPagination</span><span class=\"token punctuation\">(</span>BasePaginationResponseMixin<span class=\"token punctuation\">,</span> PageNumberPagination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    page_size <span class=\"token operator\">=</span> <span class=\"token number\">20</span>\n    page_size_query_param <span class=\"token operator\">=</span> <span class=\"token string\">'page_size'</span>\n    max_page_size <span class=\"token operator\">=</span> <span class=\"token number\">100</span></code></pre></div>\n<p>챗지피티도 계속 틀린 답만 내고 swagger에는 관련 기능이 있는데 <code class=\"language-text\">drf-spectacular</code> 의 <code class=\"language-text\">OpenApiResponse</code> 에는 response header에 대한 내용이 없고,,, 🫠</p>\n<p><code class=\"language-text\">drf-spectacular</code> 에 issue에서 검색 하니깐 나랑 같은 기능을 물어본 사람이 있어서 관련 PR까지 추적해서 찾았다</p>\n<blockquote>\n<p><a href=\"https://swagger.io/docs/specification/v3_0/describing-responses/#response-headers\">swagger response-header</a><br>\n<a href=\"https://github.com/tfranzel/drf-spectacular/issues/283\">drf-spectacular issue</a><br>\n<a href=\"https://github.com/maykinmedia/drf-spectacular/commit/179b4e14c22a8a3dafaac231ca2734309043db87\">drf-spectacular commit</a></p>\n</blockquote>\n<p>request의 쿼리 파라미터와 동일하게 <code class=\"language-text\">OpenApiParameter</code> 사용하고 아래 값만 설정하면 된다</p>\n<ul>\n<li><code class=\"language-text\">response=True</code> 로 설정해야 response에서 사용되는 내용으로 표시</li>\n<li><code class=\"language-text\">location=OpenApiParameter.HEADER</code> 표시해야 함</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> drf_spectacular<span class=\"token punctuation\">.</span>types <span class=\"token keyword\">import</span> OpenApiTypes\n<span class=\"token keyword\">from</span> drf_spectacular<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> OpenApiExample<span class=\"token punctuation\">,</span> OpenApiParameter<span class=\"token punctuation\">,</span> OpenApiResponse\n<span class=\"token keyword\">from</span> drf_spectacular<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> extend_schema\n\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> PerformanceStatus\n<span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>serializers <span class=\"token keyword\">import</span> PerformanceSerializer\n\nPAGINATION_PARAMS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    OpenApiParameter<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"Total-Count\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">,</span>\n        location<span class=\"token operator\">=</span>OpenApiParameter<span class=\"token punctuation\">.</span>HEADER<span class=\"token punctuation\">,</span>\n        response<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n        description<span class=\"token operator\">=</span><span class=\"token string\">\"전체 데이터 개수\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    OpenApiParameter<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"Next-Page\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">type</span><span class=\"token operator\">=</span>OpenApiTypes<span class=\"token punctuation\">.</span>URI<span class=\"token punctuation\">,</span>\n        location<span class=\"token operator\">=</span>OpenApiParameter<span class=\"token punctuation\">.</span>HEADER<span class=\"token punctuation\">,</span>\n        response<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n        description<span class=\"token operator\">=</span><span class=\"token string\">\"다음 페이지 URL\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    OpenApiParameter<span class=\"token punctuation\">(</span>\n        name<span class=\"token operator\">=</span><span class=\"token string\">\"Previous-Page\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token builtin\">type</span><span class=\"token operator\">=</span>OpenApiTypes<span class=\"token punctuation\">.</span>URI<span class=\"token punctuation\">,</span>\n        location<span class=\"token operator\">=</span>OpenApiParameter<span class=\"token punctuation\">.</span>HEADER<span class=\"token punctuation\">,</span>\n        response<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n        description<span class=\"token operator\">=</span><span class=\"token string\">\"이전 페이지 URL\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\nPERFORMANCE_LIST_SCHEMA <span class=\"token operator\">=</span> extend_schema<span class=\"token punctuation\">(</span>\n    tags<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'공연'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    summary<span class=\"token operator\">=</span><span class=\"token string\">\"공연 목록 조회\"</span><span class=\"token punctuation\">,</span>\n    parameters<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n        OpenApiParameter<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"genre_id\"</span><span class=\"token punctuation\">,</span> description<span class=\"token operator\">=</span><span class=\"token string\">\"공연 장르 id\"</span><span class=\"token punctuation\">,</span> required<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        OpenApiParameter<span class=\"token punctuation\">(</span>\n            name<span class=\"token operator\">=</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span>\n            enum<span class=\"token operator\">=</span>PerformanceStatus<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            description<span class=\"token operator\">=</span><span class=\"token string\">\"공연 상태\"</span><span class=\"token punctuation\">,</span>\n            examples<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n                OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 예정\"</span><span class=\"token punctuation\">,</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"upcoming\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 중\"</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">=</span><span class=\"token string\">\"ongoing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                OpenApiExample<span class=\"token punctuation\">(</span><span class=\"token string\">\"공연 종료\"</span><span class=\"token punctuation\">,</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"ended\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> PAGINATION_PARAMS<span class=\"token punctuation\">,</span>\n    responses<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n        <span class=\"token number\">200</span><span class=\"token punctuation\">:</span> OpenApiResponse<span class=\"token punctuation\">(</span>\n            response<span class=\"token operator\">=</span>PerformanceSerializer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            description<span class=\"token operator\">=</span><span class=\"token string\">\"공연 목록 리스트\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h3>결과 - swagger 화면</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e1766a8a8ea282537ead0fbc46ec34bd/3b2f8/swagger_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACE0lEQVR42p2S309SYRjHz18SWm0hh8M5hwMyV2QEJOegqYChQltkIUqmsgwFNERZFtVY2caWLh0mOZj92PqDumh1kT8ulG7Kb+97sLWuOnXx2fPs2ft+3/f73cOUN2soV6rY2n6PSvUNXtfeYW1jCy9ebmBl7ZUmVtc3UVpZR/XtBzAfv+zj09dD7Bx8x/43YK8O7B4e/Rc7Bz/A0Ka4XMK1yBCGY3FEY6OEOIZHtBMbvYXI0E3ML9wHQ381Nj4J0WwCb+VhMLSANRqg15/RDL2j051AV3cPmL36EZIzGXR2yugKKjjntKPN3oZWWyusVqsmbDYbOM6I/oEQFQSmkik42ttx3n4WFqsFZtEMSZI0Q0WNRhbBgUEiSCxPJqbIUIIoieCMHEwm0z/BCwJOnzqJXp+/YTlLwvQHfOgLBSB7vfDICmTFS1D+ikeWcZlkF7p6HfOLBTB0XcqVGgqPiig+e47ZbA7T6Vk1V1pVUr9r8pjp9BxmMg3Sc1mkMvewXFptCOYW8hjsv4JoNIpwOAyXy6Vmo1riiSUK6QWeh0DsiaKgzliWVeE4Ds3NTeju6W0ILj54jMiNEQSDQfQFAvD7fFAUGU7nRbiJeEfHJbjdLnhIVYhFh+MCLORB1mBAi16v1iadjlgngp9366rlh0+eIpdfQuLOXbKXCXU3KbcnSP+L41l8bIIw/scZuuD5pQJ+Ag8PGmiZD7mfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swagger_1\"\n        title=\"\"\n        src=\"/static/e1766a8a8ea282537ead0fbc46ec34bd/f058b/swagger_1.png\"\n        srcset=\"/static/e1766a8a8ea282537ead0fbc46ec34bd/c26ae/swagger_1.png 158w,\n/static/e1766a8a8ea282537ead0fbc46ec34bd/6bdcf/swagger_1.png 315w,\n/static/e1766a8a8ea282537ead0fbc46ec34bd/f058b/swagger_1.png 630w,\n/static/e1766a8a8ea282537ead0fbc46ec34bd/40601/swagger_1.png 945w,\n/static/e1766a8a8ea282537ead0fbc46ec34bd/78612/swagger_1.png 1260w,\n/static/e1766a8a8ea282537ead0fbc46ec34bd/3b2f8/swagger_1.png 2790w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/209349ecbb65eefd5706b1734a29d56d/cc95c/swagger_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABuklEQVR42qWSa2vTYBiG82Pmhwmu9mBotU2jYN3hQ1sPuP8giqIIyqROFPwqfvIf+QMK4jqn6XpI0nPTZF3befm8jRvD4eYQciVP7jfvnSd5bq3V8+l6YwbBhGEw/S/6/gSt0QnYdUfUhNZwJkxxh5NzY/fH4uOhdUYzdpwWlWYDe+jheAH9Pc5N1z+g7U3RVFH+XuVzucyWVWd718Fq9LCaPap2/59Qz9bbo9DQm8CHj5/IFwrcXr9Lcf0OhftF8veKLK+sCiunsrq2RtbMslHaxJ+BNppCafMtqaSOnrpCXI8J8fk1cjlCJHI60WiUCwsLPHj4mOCnGCrXl69ek752les5k3hczGIhiUTiTHRd5+LiIo+ePCU4ODTcKHHDNLmVz5HMJlm6tHRmZ3/tUIbMm3fv5ZNT3FzOYZiGdJsmnQ7JZDJH9UkyGIZBLBbl2fMXYYcqNpWqy5edOhXLkdqRSbtzvtVC/euPJts190hXbFl2qEut9lgybeWlqVHXWirU+8jBQDI1GIeo+2Y3wO7thWvH9K78K0fCfKj3gt85VKdG25+j6uN0JAJ10dUL/1xzB/s0Oif3/ALYYdm3DhFRcwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"swagger_2\"\n        title=\"\"\n        src=\"/static/209349ecbb65eefd5706b1734a29d56d/f058b/swagger_2.png\"\n        srcset=\"/static/209349ecbb65eefd5706b1734a29d56d/c26ae/swagger_2.png 158w,\n/static/209349ecbb65eefd5706b1734a29d56d/6bdcf/swagger_2.png 315w,\n/static/209349ecbb65eefd5706b1734a29d56d/f058b/swagger_2.png 630w,\n/static/209349ecbb65eefd5706b1734a29d56d/40601/swagger_2.png 945w,\n/static/209349ecbb65eefd5706b1734a29d56d/78612/swagger_2.png 1260w,\n/static/209349ecbb65eefd5706b1734a29d56d/cc95c/swagger_2.png 2796w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>✓ 데이터 수가 적어서 <code class=\"language-text\">next-page</code>와 <code class=\"language-text\">previouse-page</code>는 response header에 포함 안 된 상태</p>\n<br>\n<h3>ref.</h3>\n<blockquote>\n<p><a href=\"https://techblog.yogiyo.co.kr/django-rest-framework-api-document-generator-feat-drf-spectacular-585fcabec404\">요기요 기술 블로그</a></p>\n</blockquote>\n<br>\n<br>","frontmatter":{"title":"📌 DRF - swagger 적용하기","date":"March 07, 2025","description":"drf-spectacular 로 구현하는 drf API 문서화"}},"previous":{"fields":{"slug":"/django/drf-cursor_pagination/"},"frontmatter":{"title":"📌 DRF - CursorPagination"}},"next":null},"pageContext":{"id":"ffca739a-f60e-5936-a9ac-b5740a1d5a67","previousPostId":"858c21fc-dfbb-5676-aefc-603f5ed5fa2a","nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}