{"componentChunkName":"component---src-templates-blog-post-js","path":"/django/drf-authentication-1/","result":{"data":{"site":{"siteMetadata":{"title":"Blog"}},"markdownRemark":{"id":"b88ce015-e5f1-55b4-a033-0b4bdc01d9a8","excerpt":"를 적용하다가  가 왜 나오는 지 찾다가 정리하는 DRF 인증 포스팅...🦜 Contents 1. dj-rest-auth의 기본 인증 2. TokenAuthentication TOKEN_MODEL dj-rest-auth : LoginView 1. dj-rest-auth…","html":"<br>\n<blockquote>\n<p><code class=\"language-text\">simplejwt</code>를 적용하다가 <code class=\"language-text\">{\"key\" : \" \"}</code> 가 왜 나오는 지 찾다가 정리하는 DRF 인증 포스팅...🦜</p>\n</blockquote>\n<br>\n<h1>Contents</h1>\n<ul>\n<li><a href=\"#1-dj-rest-auth%EC%9D%98-%EA%B8%B0%EB%B3%B8-%EC%9D%B8%EC%A6%9D\">1. dj-rest-auth의 기본 인증</a></li>\n<li><a href=\"#2-tokenauthentication\">2. TokenAuthentication</a>\n<ul>\n<li><a href=\"#tokenmodel\">TOKEN_MODEL</a></li>\n<li><a href=\"#dj-rest-auth--loginview\">dj-rest-auth : LoginView</a></li>\n</ul>\n</li>\n</ul>\n<br>\n<br>\n<h1>1. dj-rest-auth의 기본 인증</h1>\n<ul>\n<li>기본적으로 dj-rest-auth는 Django의 토큰 기반 인증을 사용하고 있다.</li>\n<li>dj-rest-auth 설치 후 <code class=\"language-text\">Installed_Apps</code>에 추가하는 앱 중 <code class=\"language-text\">rest_framework.authtoken</code>를 통해 확인할 수 있다.</li>\n<li>dj-rest-auth의 기본 인증으로 <code class=\"language-text\">JWT</code>를 사용하고 싶다면, <code class=\"language-text\">djangorestframework-simplejwt</code> 패키지 설치해야 한다. <a href=\"https://soojiinleee.github.io/Django/drf-authentication(02)-dj-rest-auth-&#x26;-jwt/\">(👮 <em>다음 포스팅</em> )</a></li>\n</ul>\n<h3>참고</h3>\n<ul>\n<li><a href=\"https://www.django-rest-framework.org/api-guide/authentication/#django-rest-auth-dj-rest-auth\">DRF- dj-rest-auth</a></li>\n<li><a href=\"https://dj-rest-auth.readthedocs.io/en/latest/index.html\">dj-rest-auth 공식문서</a></li>\n</ul>\n<br>\n<br>\n<h1>2. TokenAuthentication</h1>\n<h2>TOKEN_MODEL</h2>\n<ul>\n<li><code class=\"language-text\">dj-rest-auth</code>의 기본 설정을 보면 <code class=\"language-text\">rest_framework.authtoken</code> 의 Token 모델을 사용하는 것을 알 수 있다.\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">REST_AUTH <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'TOKEN_MODEL'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'rest_framework.authtoken.models.Token'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li><code class=\"language-text\">rest_framework.authtoken</code> 앱을 추가하고 <code class=\"language-text\">migrate</code>를 하면 <code class=\"language-text\">DB</code>에 <code class=\"language-text\">authtoken_token</code> 테이블이 생성된다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 456px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/83112a334ebd730addda2629c4906f49/7f664/authtoken_token.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABnElEQVR42nWQzWoTURiG5wJcWPA2hAq6EVy4cCNVoUXBWxDEK5AWFV1IaWkNCF5JKaUaM0k7kiFmJnHyM5PMT1KbjJlk5swYV48no1SycPHwvpyP7+X9jvIziVDtlAMr45tZp1RSabfb1Go1dF1H0zQGgwGz2YzJZEIURUtMp9MlFBFHNIIE3RU4dgfLatHtdjEMA8dxME2TMAyZz+ekaYoQ4kKzLCOO4+XATAae9FKOWhlN4yvlcplms5k3q1aruVqWhaqqVCqVXIvForyklHvf90mS5KKtksmT675A66d4fZtOp0W/59AwDexuh0bDzH27ZeG6fYLAl/OeDPLwPJdwPJYtZ/JLpjnKLyEb2oJDK6X6RePg8Ai9Vuf4U1HyWTY85fjjH185OSWWS1makIpYkpDIsMXbgmQRePW5z/1CyMMPE26/8XhUOJMMWdv22Nj/zq3XQ+7tDKSXujvk+ouA1c2Aa1uSzb9s/UO59MRl9dWIm29/cGf7nAd7I9Z2R6wXxmy8G3Hj5Rl3d855/H6c65VnHpefeqz8h98FpNMagFyEEwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"authtoken_token 테이블\"\n        title=\"\"\n        src=\"/static/83112a334ebd730addda2629c4906f49/7f664/authtoken_token.png\"\n        srcset=\"/static/83112a334ebd730addda2629c4906f49/c26ae/authtoken_token.png 158w,\n/static/83112a334ebd730addda2629c4906f49/6bdcf/authtoken_token.png 315w,\n/static/83112a334ebd730addda2629c4906f49/7f664/authtoken_token.png 456w\"\n        sizes=\"(max-width: 456px) 100vw, 456px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></li>\n</ul>\n<br>\n<ul>\n<li>로그인 성공 시 토큰이 발행되고,\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/36e8de85b34bad76e202af9e8839f4db/bc43a/response_key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.759493670886075%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAATElEQVR42n3FSQ6AMAzAwP7/rSAQXZMmMYUbFyyNnI594yqZUgt5vdWKyiDc+cumoabLfC/mnHmQRCejN/pQahfKowmiRkT8+ha4GzeqNJ2AFdY++AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"postman-response\"\n        title=\"\"\n        src=\"/static/36e8de85b34bad76e202af9e8839f4db/f058b/response_key.png\"\n        srcset=\"/static/36e8de85b34bad76e202af9e8839f4db/c26ae/response_key.png 158w,\n/static/36e8de85b34bad76e202af9e8839f4db/6bdcf/response_key.png 315w,\n/static/36e8de85b34bad76e202af9e8839f4db/f058b/response_key.png 630w,\n/static/36e8de85b34bad76e202af9e8839f4db/40601/response_key.png 945w,\n/static/36e8de85b34bad76e202af9e8839f4db/78612/response_key.png 1260w,\n/static/36e8de85b34bad76e202af9e8839f4db/bc43a/response_key.png 2676w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></li>\n</ul>\n<br>\n<ul>\n<li><code class=\"language-text\">authtoken_token</code>에 유저 id와 발행된 토큰이 key로 저장된다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84c5f89bb44f799f722cdf806a7c62a9/cd138/saved_key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.658227848101264%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwElEQVR42j2My2oCQRBF53OCCyF7HzBRPyogko1MTD7N+E4MRscR7e5RogsX6jyP1UPI4nDvrVtVTpbGWPIsIYkj9qERvRU5TaL/Ls8lF7vWpxx/D2wCnzi6kkkPGdHtgjOcbxh8BsKaD8vMZ/S9pf+XR7afb1mZM9OFYvqjBcV4sWMiOvgKsD+W+ow6xThuz9B8NzQEt6fFh+JDKl1F3dO0ZP7wvKPUVsVepaupyrzmGeqvIU9y774Zyh3F44vmDuZhyp09Xy58AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"token 테이블\"\n        title=\"\"\n        src=\"/static/84c5f89bb44f799f722cdf806a7c62a9/f058b/saved_key.png\"\n        srcset=\"/static/84c5f89bb44f799f722cdf806a7c62a9/c26ae/saved_key.png 158w,\n/static/84c5f89bb44f799f722cdf806a7c62a9/6bdcf/saved_key.png 315w,\n/static/84c5f89bb44f799f722cdf806a7c62a9/f058b/saved_key.png 630w,\n/static/84c5f89bb44f799f722cdf806a7c62a9/40601/saved_key.png 945w,\n/static/84c5f89bb44f799f722cdf806a7c62a9/cd138/saved_key.png 1220w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></li>\n</ul>\n<br>\n<h2>dj-rest-auth : LoginView</h2>\n<ul>\n<li>인증 유형(<code class=\"language-text\">JWT</code>/<code class=\"language-text\">TOKEN</code>/<code class=\"language-text\">SESSION</code>)에 따라 다르게 처리 되어 있다.</li>\n<li><code class=\"language-text\">dj-rest-auth</code>의 기본 설정에 인증 유형에 따른 <code class=\"language-text\">serializer</code> 처리도 되어 있고 커스텀도 가능하다.\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">REST_AUTH <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'TOKEN_SERIALIZER'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'dj_rest_auth.serializers.TokenSerializer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'JWT_SERIALIZER'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'dj_rest_auth.serializers.JWTSerializer'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>구체적으로 어떻게 동작하는 지 확인하고 싶을 때는 <strong>무조건</strong> 코드 확인</li>\n</ul>\n<h3>참고</h3>\n<ul>\n<li><a href=\"https://dj-rest-auth.readthedocs.io/en/latest/configuration.html#configuration\">dj-rest-auth : Configuration</a></li>\n<li><a href=\"https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication\">DRF-TokenAuthentication</a></li>\n<li><a href=\"https://github.com/iMerica/dj-rest-auth/blob/master/dj_rest_auth/views.py\">dj-rest-auth github: LoginView</a></li>\n</ul>","frontmatter":{"title":"📌 DRF Authentication 1","date":"March 18, 2023","description":"DRF의 dj-rest-auth & TokenAuthentication 적용하기"}},"previous":{"fields":{"slug":"/django/settings-file/"},"frontmatter":{"title":"📌 django - 환경 파일 관리하기"}},"next":{"fields":{"slug":"/django/drf-authentication-2/"},"frontmatter":{"title":"📌 DRF Authentication 2"}}},"pageContext":{"id":"b88ce015-e5f1-55b4-a033-0b4bdc01d9a8","previousPostId":"b2f99ec7-292a-51ed-8d1c-57b5ec72292f","nextPostId":"e447f1ae-3754-59bd-8b34-734d65e86e87"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}