{"componentChunkName":"component---src-templates-blog-post-js","path":"/django/drf-cursor_pagination/","result":{"data":{"site":{"siteMetadata":{"title":"Blog"}},"markdownRemark":{"id":"858c21fc-dfbb-5676-aefc-603f5ed5fa2a","excerpt":"ê³µì—° ë¦¬ë·°ë¥¼ ë¬´í•œ ìŠ¤í¬ë¡¤ë¡œ ì¡°íšŒí•˜ê³  ì‹¶ì–´ì„œ ë¡œ êµ¬í˜„ í–ˆìœ¼ë‚˜, ê³µì—°ìˆœ ì •ë ¬ì´ ì ìš© ë˜ì§€ ì•Šì•„ ìƒê¸´ ë¬¸ì œë¥¼ ì •ë¦¬í•œ í¬ìŠ¤íŒ… ğŸ™ƒ ëª©ì°¨ ë¬¸ì œ ìƒí™© ì›ì¸ ë¶„ì„ í•´ê²° ë°©ë²• OrderingFilter ë¬¸ì œ ìƒí™© ì˜ˆìƒëœ ì •ë ¬: ê³µì—° ì´ë¦„() ì‹¤ì œ ì •ë ¬: ìµœì‹  ì‘ì„±ì¼() ì›ì¸ ë¶„ì„â€¦","html":"<p>ê³µì—° ë¦¬ë·°ë¥¼ ë¬´í•œ ìŠ¤í¬ë¡¤ë¡œ ì¡°íšŒí•˜ê³  ì‹¶ì–´ì„œ <code class=\"language-text\">CursorPagination</code>ë¡œ êµ¬í˜„ í–ˆìœ¼ë‚˜,<br>\nê³µì—°ìˆœ ì •ë ¬ì´ ì ìš© ë˜ì§€ ì•Šì•„ ìƒê¸´ ë¬¸ì œë¥¼ ì •ë¦¬í•œ í¬ìŠ¤íŒ… ğŸ™ƒ</p>\n<h1>ëª©ì°¨</h1>\n<ul>\n<li><a href=\"#%EB%AC%B8%EC%A0%9C-%EC%83%81%ED%99%A9\">ë¬¸ì œ ìƒí™©</a></li>\n<li><a href=\"#%EC%9B%90%EC%9D%B8-%EB%B6%84%EC%84%9D\">ì›ì¸ ë¶„ì„</a></li>\n<li><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\">í•´ê²° ë°©ë²•</a></li>\n<li><a href=\"#orderingfilter\">OrderingFilter</a></li>\n</ul>\n<h1>ë¬¸ì œ ìƒí™©</h1>\n<ul>\n<li>ì˜ˆìƒëœ ì •ë ¬: ê³µì—° ì´ë¦„(<code class=\"language-text\">performance__name</code>)</li>\n<li>ì‹¤ì œ ì •ë ¬: ìµœì‹  ì‘ì„±ì¼(<code class=\"language-text\">-created_at</code>)</li>\n</ul>\n<h1>ì›ì¸ ë¶„ì„</h1>\n<h3>1ï¸âƒ£ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì „ë‹¬ ì—¬ë¶€ í™•ì¸</h3>\n<p><code class=\"language-text\">sort_by=name</code>ì„ ì˜ ì „ë‹¬ ë˜ê³ ,<br>\n<code class=\"language-text\">query_set</code>ì—ë„ <code class=\"language-text\">order_by('performance__name')</code>ì´ ì ìš©ë˜ê³  ìˆìœ¼ë‚˜<br>\nìµœì¢… ì‘ë‹µ ê°’ì€ <code class=\"language-text\">-created_at</code> ìœ¼ë¡œ ë°˜í™˜ë¨.. ğŸ˜‡</p>\n<h4><code class=\"language-text\">views.py</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ReviewViewSet</span><span class=\"token punctuation\">(</span>viewsets<span class=\"token punctuation\">.</span>ModelViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"ê³µì—° í›„ê¸° CRUD API\"\"\"</span>\n    pagination_class <span class=\"token operator\">=</span> StandardCursorPagination\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        queryset <span class=\"token operator\">=</span> Review<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'performance'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'performance__genre'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        is_my_review <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query_params<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'is_my_review'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n        sort_by <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query_params<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'sort_by'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># ë§ˆì´í˜ì´ì§€: ë¦¬ë·° ì •ë ¬</span>\n        \n        <span class=\"token keyword\">if</span> is_my_review<span class=\"token punctuation\">:</span>    <span class=\"token comment\"># ë‚´ê°€ ì‘ì„±í•œ ë¦¬ë·°ë§Œ ì¡°íšŒ</span>\n            queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>user__id<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> sort_by <span class=\"token operator\">==</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span>\n                queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'performance__name'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n                queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-created_at'</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> queryset</code></pre></div>\n<h3>2ï¸âƒ£ <code class=\"language-text\">CursorPagination</code>ì˜ ê¸°ë³¸ ì •ë ¬ í™•ì¸</h3>\n<p><code class=\"language-text\">StandardCursorPagination</code> í´ë˜ìŠ¤ì—ì„œ ê¸°ë³¸ ì •ë ¬ì´ <code class=\"language-text\">-created_at</code>ìœ¼ë¡œ ë˜ì–´ ìˆì–´ì„œ,\n<code class=\"language-text\">get_queryset</code>ì—ì„œ ë³€ê²½í•œ ì •ë ¬ ê¸°ì¤€(<code class=\"language-text\">performance__name</code>)ì´ ì ìš© ì•ˆ ë¨</p>\n<h4><code class=\"language-text\">paginations.py</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">StandardCursorPagination</span><span class=\"token punctuation\">(</span>BasePaginationResponseMixin<span class=\"token punctuation\">,</span> CursorPagination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    page_size <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n    ordering <span class=\"token operator\">=</span> <span class=\"token string\">'-created_at'</span>  <span class=\"token comment\"># ê¸°ë³¸ ì •ë ¬ì´ ìµœì‹  ìƒì„±ì¼ ê¸°ì¤€</span></code></pre></div>\n<h3>ğŸ”· <code class=\"language-text\">pagination</code> ì ìš© ì‹œì </h3>\n<ol>\n<li><code class=\"language-text\">get_queryset()</code>ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬(<code class=\"language-text\">queryset</code>) ê²°ì •</li>\n<li><code class=\"language-text\">pagination</code>ì´ <code class=\"language-text\">queryset</code>ì— ì ìš©\n<ul>\n<li><code class=\"language-text\">CursorPagination</code>ëŠ” ì´ ë‹¨ê³„ì— <code class=\"language-text\">ordering</code>ê³¼ <code class=\"language-text\">limit</code> ì ìš©</li>\n</ul>\n</li>\n<li><code class=\"language-text\">serializer</code> í˜¸ì¶œ</li>\n</ol>\n<h1>í•´ê²° ë°©ë²•</h1>\n<h3><code class=\"language-text\">OrderingFilter</code>í™œìš©</h3>\n<blockquote>\n<p><a href=\"https://www.django-rest-framework.org/api-guide/pagination/#cursorpagination\"><strong>ê³µì‹ ë¬¸ì„œ</strong></a>: <code class=\"language-text\">ordering</code> ì†ì„±ì„ <code class=\"language-text\">CursorPagination</code> í´ë˜ìŠ¤ì—ì„œ ì§ì ‘ ì˜¤ë²„ë¼ì´ë“œí•˜ê±°ë‚˜, <code class=\"language-text\">OrderingFilter</code>ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë™ì  ì •ë ¬ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n</blockquote>\n<h3>1ï¸âƒ£ <code class=\"language-text\">CursorPagination</code> ê¸°ë³¸ ì •ë ¬ ì œê±°</h3>\n<p>ê¸°ë³¸ <code class=\"language-text\">ordering</code> ê°’ì„ <code class=\"language-text\">None</code>ìœ¼ë¡œ ì„¤ì •í•˜ì—¬,<br>\n<code class=\"language-text\">OrderingFilter</code>ì—ì„œ ì •ë ¬ ê¸°ì¤€ì„ ë™ì ìœ¼ë¡œ ë°˜ì˜í•˜ê²Œ ë³€ê²½</p>\n<h4><code class=\"language-text\">paginations.py</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">StandardCursorPagination</span><span class=\"token punctuation\">(</span>BasePaginationResponseMixin<span class=\"token punctuation\">,</span> CursorPagination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    page_size <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n    ordering <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span>  <span class=\"token comment\"># ê¸°ë³¸ ì •ë ¬ í•´ì œ</span></code></pre></div>\n<h3>2ï¸âƒ£ <code class=\"language-text\">OrderingFilter</code> ì ìš©</h3>\n<ul>\n<li><code class=\"language-text\">OrderingFilter</code>ë¥¼ <code class=\"language-text\">filter_backends</code> ì¶”ê°€í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì—ì„œ <code class=\"language-text\">ordering</code> íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•´ ì •ë ¬</li>\n<li>í—ˆìš©í•  ì •ë ¬ í•„ë“œë¥¼ <code class=\"language-text\">ordering_fields</code>ì— ëª…ì‹œ</li>\n<li>ê¸°ë³¸ ì •ë ¬ì„ <code class=\"language-text\">ordering = ['-created_at']</code>ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ê°€ ì—†ì„ ê²½ìš° ìµœì‹ ìˆœ ì •ë ¬ì´ ì ìš©</li>\n</ul>\n<h4><code class=\"language-text\">views.py</code></h4>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ReviewViewSet</span><span class=\"token punctuation\">(</span>viewsets<span class=\"token punctuation\">.</span>ModelViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"ê³µì—° í›„ê¸° CRUD API\"\"\"</span>\n    pagination_class <span class=\"token operator\">=</span> StandardCursorPagination\n    filter_backends <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>OrderingFilter<span class=\"token punctuation\">]</span>\n    ordering_fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'performance__name'</span><span class=\"token punctuation\">]</span>\n    ordering <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'-created_at'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># ê¸°ë³¸ ì •ë ¬: ìµœì‹  ë¦¬ë·°</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        queryset <span class=\"token operator\">=</span> Review<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'performance'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'performance__genre'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        is_my_review <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query_params<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'is_my_review'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n        \n        <span class=\"token keyword\">if</span> is_my_review<span class=\"token punctuation\">:</span>    <span class=\"token comment\"># ë‚´ê°€ ì‘ì„±í•œ ë¦¬ë·°ë§Œ ì¡°íšŒ</span>\n            queryset <span class=\"token operator\">=</span> queryset<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>user__id<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> queryset</code></pre></div>\n<h3>3ï¸âƒ£ ì •ë ¬ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì‚¬ìš©</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">GET /reviews/?ordering<span class=\"token operator\">=</span>performance__name  <span class=\"token comment\"># ê³µì—° ì´ë¦„ ìˆœ ì •ë ¬</span>\nGET /reviews/?ordering<span class=\"token operator\">=</span>-created_at       <span class=\"token comment\"># ìµœì‹ ìˆœ ì •ë ¬</span></code></pre></div>\n<h1>OrderingFilter</h1>\n<p><code class=\"language-text\">OrderingFilter</code>ëŠ” Django REST Frameworkì—ì„œ ì œê³µí•˜ëŠ” í•„í„°ë§ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ë¡œ, ì‚¬ìš©ìê°€ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ í†µí•´ ì›í•˜ëŠ” ì •ë ¬ ê¸°ì¤€ ì ìš©</p>\n<h3>ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥</h3>\n<ul>\n<li><code class=\"language-text\">ordering_fields</code> ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ì •ë ¬ ê°€ëŠ¥í•œ í•„ë“œë¥¼ ì œí•œí•  ìˆ˜ ìˆìŒ</li>\n<li><code class=\"language-text\">ordering</code> ì†ì„±ì„ ì„¤ì •í•˜ë©´ ê¸°ë³¸ ì •ë ¬ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ</li>\n<li>í´ë¼ì´ì–¸íŠ¸ì—ì„œ <code class=\"language-text\">?ordering=í•„ë“œëª…</code>ì„ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ì—¬ ë™ì  ì •ë ¬ ê°€ëŠ¥</li>\n</ul>\n<h3>ğŸ“Œ ì˜ˆì œ ì½”ë“œ</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>filters <span class=\"token keyword\">import</span> OrderingFilter\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyViewSet</span><span class=\"token punctuation\">(</span>viewsets<span class=\"token punctuation\">.</span>ModelViewSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    filter_backends <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>OrderingFilter<span class=\"token punctuation\">]</span>\n    ordering_fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'created_at'</span><span class=\"token punctuation\">]</span>\n    ordering <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'-created_at'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´ í´ë¼ì´ì–¸íŠ¸ëŠ” <code class=\"language-text\">?ordering=name</code> ë˜ëŠ” <code class=\"language-text\">?ordering=-created_at</code>ê³¼ ê°™ì€ ìš”ì²­ ê°€ëŠ¥</p>","frontmatter":{"title":"ğŸ“Œ DRF - CursorPagination","date":"March 06, 2025","description":"CursorPaginationì—ì„œ ì •ë ¬í•˜ê¸°"}},"previous":{"fields":{"slug":"/django/drf-annotate/"},"frontmatter":{"title":"ğŸ“Œ DRF - annotate & serializer field"}},"next":null},"pageContext":{"id":"858c21fc-dfbb-5676-aefc-603f5ed5fa2a","previousPostId":"476d819c-f8e4-513b-9bc4-1175cd35bd72","nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}